# Python Logging 使用指南 
对程序员来说，Logging 是一种非常重要的功能。无论调试程序还是程序运行时的信息显示，Logging 都很有用。在本文中，我会演示为什么要使用以及如何使用 Python 中的 Logging 模块。

print 语句跟 Logging 输出存在本质上的不同。一般地，print 语句用于向 stdout（标准输出）写入有用的信息或程序需要输出的信息。然而 Logging 将这些信息写入 stderr（标准错误输出）。

如果我运行这段程序，可以看到命令行输出了如下信息。

然而对于普通用户来说，信息太多了。虽然这些都在命令行显示，但数据却被分开了。所以用户应当这样运行程序。

这里多说一句，小编是一名python开发工程师，这里有我自己整理了一套最新的python系统学习教程，包括从基础的python脚本到web开发、爬虫、数据分析、数据可视化、机器学习等。想要这些资料的可以进裙930900780领取。

在这里，需要输出的信息通过重定向符 \> 写入到一个文件。所以我们能看到终端的运行情况，也可以方便地从文件中得到输出信息。现在我们来了解日志等级！

需要使用 Logging 的原因各有不同。这些原因可以根据严重性的不同分为如下几类。

*   **DEBUG**: 开发者调试信息，包括经计算得到的值、参数估值、URL、API 调用信息等。
*   **INFO**: 一般性的信息。
*   **WARNING**: 关于输入、参数等的警告。
*   **ERROR**: 报告由于用户操作不当或程序运行时发生的错误。
*   **CRITICAL**: 最高等级的日志输出，通常用于某些关键问题（取决于具体情况）。

最常用的日志类型有：**DEBUG**、**INFO** 和 **ERROR**。然而，经常会出现因 Python 版本不匹配抛出警告的情况。


Logger 可以配置不同的参数，可以配置特定日志等级、日志文件名、文件模式和日志打印的输出格式。

Logger 可采用如下配置。

上面的代码向 program.log 文件输出日志。filemode='w' 用于设置文件读写模式。filemode='w' 表示需要打开一个新文件并覆盖原来的内容。该参数默认设置为 'a'，此时会打开相应文件，并追加日志内容，因为有时需要获取历史日志。表示等级的参数 level 用于确定日志的最低等级。例如，当设置 level 为 **INFO**，程序就不会输出 **DEBUG** 级别的日志。你可能知道，需要设置 'verbose=debug' 才能获取一些参数。日志等级默认为 **INFO**。

虽然上述方法直接明了，满足了一个简单的应用程序的需求，但对于一个软件产品或服务来说，需要全面的日志处理流程。因为很难在数以百万计的 **DEBUG** 级日志中找到某个 **ERROR** 级日志。此外，在整个程序和模块中，我们应当使用单一的 Logger。这样我们就可以正确地把日志添加到同一文件中。所以我们可以使用具有不同配置的 Handler 来处理这种任务。

可以看出，我们首先通过名称获取到一个 Logger。以此可以在程序的其他任意地方使用同一个 Logger。我们把全局的 Logging 等级设为最低的 **DEBUG**，这样我们就可以在其他日志处理器中设置任意日志等级。

接着，我们创建两个日志处理器，分别用于 **console** 和 **file** 形式的输出，并设置各自的日志等级。这可以减少控制台输出的开销，转而在文件中输出。这方便了以后的调试。


Logging 不是只用来打印我们自己的信息的。有时候我们需要打印其他信息，例如时间、日志等级、进程 ID。因此我们需要对日志进行格式化。我们来看下面的代码。

添加 Handler 之前，我们可以像上面的代码那样设置日志输出的格式。可以用于设置日志格式的参数远不止这些，你可以访问(docs.python.org/3/library/l…


记住，Logging 模块是线程安全的。所以除了极少数例外情况（不在本文讨论范围内）使用 Logging 不需要为多线程编写额外的处理逻辑。

