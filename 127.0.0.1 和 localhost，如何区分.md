# 127.0.0.1 和 localhost，如何区分
你好，我是猿java。

在实际开发中，我们经常会用到 `127.0.0.1` 和 `localhost`，那么，两者到底有什么区分呢？这篇文章，我们来详细了解 `127.0.0.1` 和 `localhost`。

127.0.0.1
---------

`127.0.0.1` 是一个特殊的 IPv4 地址，通常被称为“环回地址”或“回送地址”。它被用于测试和调试网络应用程序。

当你在计算机上向 `127.0.0.1` 发送数据包时，数据不会离开计算机，而是直接返回到本地。这种机制允许开发者测试网络应用程序而不需要实际的网络连接。

`127.0.0.1` 是一个专用地址，不能用于实际的网络通信，仅用于本地通信。除了 `127.0.0.1`，整个 `127.0.0.0/8`（即 127.0.0.1 到 127.255.255.255）范围内的地址都是保留的环回地址。

在 IPv6 中，类似的环回地址是 `::1`。如下图，为 MacOS的 `/etc/hosts` 文件中的内容：

![](https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/584b84e7f2fd4f2badce34efded0935f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54y_amF2YQ==:q75.awebp?rk3s=f64ab15b&x-expires=1728462674&x-signature=xKRVH7UbgJtJNBf2rlbaTH7ynU4%3D)

### 使用场景

**1\. 开发和测试**

*   开发人员常常使用`127.0.0.1`来测试网络应用程序，因为它不需要实际的网络连接。
*   可以在本地机器上运行服务器和客户端，进行开发和调试。 **2\. 网络配置和诊断**:
*   使用 `ping 127.0.0.1` 可以测试本地网络栈是否正常工作。
*   一些服务会绑定到 `127.0.0.1` 以限制访问范围，仅允许本地访问。

示例
--

运行一个简单的 Python HTTP 服务器并访问它：

```shell
python -m http.server --bind 127.0.0.1 8000

```

然后在浏览器中访问 [http://127.0.0.1:8000，你会看到服务器响应。通过](https://link.juejin.cn/?target=http%3A%2F%2F127.0.0.1%3A8000%25EF%25BC%258C%25E4%25BD%25A0%25E4%25BC%259A%25E7%259C%258B%25E5%2588%25B0%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8%25E5%2593%258D%25E5%25BA%2594%25E3%2580%2582%25E9%2580%259A%25E8%25BF%2587 "http://127.0.0.1:8000%EF%BC%8C%E4%BD%A0%E4%BC%9A%E7%9C%8B%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94%E3%80%82%E9%80%9A%E8%BF%87") 127.0.0.1，开发人员和系统管理员可以方便地进行本地网络通信测试和开发工作，而不需要依赖实际的网络连接。

### 优点

1.  **快速测试**：可以快速测试本地网络应用程序。
2.  **独立于网络**：不依赖于实际的网络连接或外部网络设备。
3.  **安全**：由于数据包不离开本地计算机，安全性较高。

### 缺点

1.  **局限性**：只能用于本地计算机，不适用于与其他计算机的网络通信。
2.  **调试范围有限**：无法测试跨网络的通信问题。

localhost
---------

`localhost` 是一个特殊的域名，指向本地计算机的主机名。

*   在 IPv4 中，`localhost` 通常映射到 IP 地址 `127.0.0.1`。
*   在 IPv6 中，`localhost` 通常映射到 IP 地址 `::1`。

`localhost` 被定义在 hosts 文件中（例如，在 Linux 系统中是 /etc/hosts 文件）。如下图，为 MacOS的 `/etc/hosts` 文件中的内容：

![](https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4d250efc7014a71a1e4dd5fcff004c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54y_amF2YQ==:q75.awebp?rk3s=f64ab15b&x-expires=1728462674&x-signature=WGitj%2BmDZ2fHwDn6KpxZCgYlj2s%3D)

因此，当你在应用程序中使用 `localhost` 作为目标地址时，系统会将其解析为 `127.0.0.1`，然后进行相同的环回处理。

### 使用场景

*   开发和测试：开发人员常使用`localhost`来测试应用程序，因为它不需要实际的网络连接。
*   本地服务：一些服务（如数据库、Web 服务器等）可以配置为只在`localhost`上监听，以限制访问范围仅限于本地计算机，增强安全性。
*   网络调试：使用`localhost`可以帮助诊断网络服务问题，确保服务在本地环境中正常运行。

### 优点

1.  **易记**：相对 IP 地址，`localhost` 更容易记忆和输入。
2.  **一致性**：在不同操作系统和环境中，`localhost` 通常都被解析为`127.0.0.1`。

### 缺点

1.  **依赖 DNS 配置**：需要正确的 hosts 文件配置，如果配置错误可能导致问题。
2.  **与 127.0.0.1 相同的局限性**：同样只能用于本地计算机。

两者对比
----

*   **本质**：`127.0.0.1` 是一个 IP 地址，而 `localhost` 是一个主机名。
*   **解析方式**：`localhost` 需要通过 DNS 或 hosts 文件解析为 `127.0.0.1`，而 `127.0.0.1` 是直接使用的 IP 地址。
*   **易用性**：`localhost` 更容易记忆和输入，但依赖于正确的 DNS/hosts 配置。
*   **性能**：通常情况下，两者在性能上没有显著差异，因为 `localhost` 最终也会解析为`127.0.0.1`。

结论
--

`127.0.0.1` 和 `localhost`都是指向本地计算机的地址，适用于本地网络应用程序的测试和调试。选择使用哪个主要取决于个人偏好和具体需求。在需要明确指定 IP 地址的场景下，`127.0.0.1` 更为直接；而在需要易记和通用的主机名时，`localhost` 更为合适。两者在实际使用中通常是等价的，差别微乎其微。

学习交流
----

如果你觉得文章有帮助，请帮忙转发给更多的好友，或关注公众号：猿java，持续输出硬核文章。